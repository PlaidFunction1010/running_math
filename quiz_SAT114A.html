<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>114 學測 數學A｜題目頁</title>

  <!-- 套用你的深綠主題 -->
  <link rel="stylesheet" href="styles.css">

  <!-- KaTeX（數學排版） -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
  <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"></script>

  <script>
    // 讓外部 JS 可以重跑數學排版
    window.rerenderMath = function(){
      if (typeof renderMathInElement === 'function') {
        renderMathInElement(document.body, {
          delimiters: [
            {left: "$$", right: "$$", display: true},
            {left: "$", right: "$", display: false}
          ]
        });
      }
    };
    // DOM 與 KaTeX 準備好就掛 App
    (function boot(){
      function ready(){ return document.readyState==='complete'||document.readyState==='interactive'; }
      function katexReady(){ return typeof renderMathInElement === 'function'; }
      function mount(){
        if (!window.__APP_BOOTED && ready() && katexReady() && typeof window.__mountApp==='function'){
          window.__APP_BOOTED = true; window.__mountApp(); window.rerenderMath();
        } else { setTimeout(mount, 40); }
      }
      mount();
    })();
  </script>
</head>
<body>

  <header>
    <h1>114 學測｜數學 A <span class="badge">Beta</span></h1>
    <div class="toolbar">
      <button id="btnStart" class="btn">開始測驗</button>
      <button id="btnSubmit" class="btn primary">交卷</button>
      <span class="small" id="scoreText" style="margin-left:auto">得分：0 / 0（只計單選/多選/填充）</span>
    </div>
  </header>

  <main id="app">
    <!-- 由 JS 依題型分區塊渲染 -->
  </main>

  <!-- 題型快速跳轉（沿用你的 .toolbar 樣式） -->
  <div class="panel" id="anchors" style="max-width:980px;margin:0 auto 40px;">
    <!-- 由 JS 產生 anchor 按鈕 -->
  </div>

  <!-- 成績面板（沿用你的 .result-modal/.modal） -->
  <div class="result-modal hidden" id="resultModal" role="dialog" aria-modal="true">
    <div class="modal">
      <h2 style="margin-top:0">成績與狀態</h2>
      <p id="resultText" class="qtext"></p>
      <p class="small">提醒：本次測驗含「非選擇題」需人工批改，已不列入自動計分。</p>
      <div class="toolbar">
        <button id="btnCloseModal" class="btn">關閉</button>
      </div>
    </div>
  </div>

  <!-- 題庫與渲染邏輯 -->
  <script src="questions_SAT114A.js?v=4"></script>
</body>
</html>
